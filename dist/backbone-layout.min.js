!function(a,b){"function"==typeof define&&define.amd?define(["backbone"],b):a.BackboneLayout=a.Backbone.Layout=b()}(this,function(){var a=function(a,b){b||(b={}),this.id=_.uniqueId("managed_"),this.view=a,this.anchor=b.anchor,this.replace=b.replace},b=function(){var b=[];this.register=function(c,d){d||(d={}),this.listenTo(c,"all",function(){this.trigger.apply(this,arguments)},this);var e=new a(c,d);b.push(e)},this.each=function(a,b){_.each(this.getViews(),a,b)},this.getViews=function(){return b},_.bindAll(this,"register","each")};_.extend(b.prototype,Backbone.Events);var c=Backbone.View.extend({constructor:function(a){a||(a={}),this.defaults&&_.defaults(a,_.result(this,"defaults")),a.serialize&&(this.serialize=a.serialize),this.viewManager=new b,this.options=a,Backbone.View.prototype.constructor.call(this,a)},initialize:function(a){this.listenTo(this.viewManager,"all",function(){this.trigger.apply(this,arguments)},this),Backbone.View.prototype.initialize.call(this,a)},registerView:function(a,b){b||(b={}),this.viewManager.register(a,b)},render:function(){return this.beforeRender&&this.beforeRender(),this.template&&this.$el.empty().append(this.template(this.serialize())),this.viewManager.each(function(a){var b=a.view;if(b.render(),a.anchor){var c=$(a.anchor,this.el);a.replace?c.replaceWith(b.el):c.html(b.el)}},this),this.afterRender&&this.afterRender(),this},close:function(){return this.viewManager.each(function(a){view=a.view,view.close&&view.close()}),this.trigger("close",this),this.unbind(),this.stopListening(),this.remove(),this.onClose&&this.onClose(),this},serialize:function(){return this.model?this.model.toJSON():{}}});return c});
//# sourceMappingURL=dist/backbone-layout.map.js